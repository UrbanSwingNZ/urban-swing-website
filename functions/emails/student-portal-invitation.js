/**
 * student-portal-invitation.js
 * Email template for inviting existing students to join the student portal
 */

/**
 * Generate student portal invitation email
 * @param {Object} student - Student data
 * @param {string} registrationLink - Link to the registration page
 * @returns {Object} Object with html and text versions
 */
function generatePortalInvitationEmail(student, registrationLink = 'https://urbanswing.co.nz/student-portal') {
  // Email color mappings from styles/base/colors.css
  const colors = {
    purplePrimary: '#9a16f5',    // --purple-primary
    pinkPrimary: '#e800f2',      // --pink-primary
    white: '#ffffff',            // --white
    textPrimary: '#333',         // --text-primary
    textLight: '#666',           // --text-light
    bgLight: '#f8f9fa',          // --bg-light / --gray-200
    bgInfoLight: '#e8f4fd',      // --info-light
    infoBlue: '#0c5aa6',         // Dark blue for info sections
    borderLight: '#e0e0e0',      // --border-light / --gray-450
  };

  const html = `
    <!-- Generated by JS: student-portal-invitation.js > generatePortalInvitationEmail -->
    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
      <div style="background: linear-gradient(135deg, ${colors.purplePrimary} 0%, ${colors.pinkPrimary} 100%); padding: 40px 20px; text-align: center;">
        <h1 style="color: ${colors.white}; margin: 0; font-size: 2rem;">Join the Urban Swing Portal!</h1>
      </div>
      
      <div style="padding: 40px 30px; background: ${colors.white};">
        <h2 style="color: ${colors.textPrimary}; margin-top: 0;">You're Invited to Access Your Student Portal</h2>
        
        <p style="font-size: 1.1rem; line-height: 1.6; color: ${colors.textPrimary};">
          Hi ${student.firstName},
        </p>
        
        <p style="font-size: 1rem; line-height: 1.6; color: ${colors.textPrimary};">
          We're excited to invite you to join the Urban Swing Student Portal! The portal is your one-stop shop 
          for managing everything related to your dancing at Urban Swing.
        </p>
        
        <div style="background: ${colors.bgInfoLight}; padding: 20px; border-radius: 8px; margin: 30px 0;">
          <h3 style="color: ${colors.infoBlue}; margin-top: 0;">What You Can Do in the Portal:</h3>
          <ul style="line-height: 1.8; color: ${colors.textPrimary};">
            <li><strong>Buy Concessions:</strong> Purchase class packages online at your convenience</li>
            <li><strong>Prepay for Classes:</strong> Reserve your spot in upcoming classes</li>
            <li><strong>Manage Your Info:</strong> Keep your contact details and preferences up to date</li>
            <li><strong>View History:</strong> Track your class check-ins and transactions</li>
          </ul>
        </div>
        
        <div style="text-align: center; margin: 40px 0;">
          <a href="${registrationLink}" 
             style="display: inline-block; padding: 16px 32px; background: ${colors.purplePrimary}; 
                    color: ${colors.white}; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 1.1rem;">
            Join the Portal
          </a>
        </div>
        
        <div style="background: ${colors.bgLight}; padding: 20px; border-radius: 8px; margin: 30px 0; border-left: 4px solid ${colors.purplePrimary};">
          <h3 style="color: ${colors.purplePrimary}; margin-top: 0;">How to Get Started:</h3>
          <ol style="line-height: 1.8; color: ${colors.textPrimary};">
            <li>Click the "Join the Portal" button above</li>
            <li>On the registration page, click on <strong>"I'm an existing student"</strong></li>
            <li>Enter your email address: <strong>${student.email}</strong></li>
            <li>Create a password for your account</li>
            <li>Start managing your Urban Swing experience!</li>
          </ol>
        </div>
        
        <p style="font-size: 1rem; line-height: 1.6; color: ${colors.textPrimary}; margin-top: 30px;">
          If you have any questions or need help setting up your account, don't hesitate to reach out to us at 
          <a href="mailto:dance@urbanswing.co.nz" style="color: ${colors.purplePrimary};">dance@urbanswing.co.nz</a>.
        </p>
        
        <p style="font-size: 1rem; line-height: 1.6; color: ${colors.textPrimary}; margin-top: 20px;">
          See you on the dance floor! ðŸ’ƒðŸ•º
        </p>
        
        <p style="font-size: 1rem; line-height: 1.6; color: ${colors.textPrimary};">
          The Urban Swing Team
        </p>
      </div>
      
      <div style="padding: 20px; text-align: center; background: ${colors.bgLight}; border-top: 1px solid ${colors.borderLight};">
        <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: ${colors.textLight};">Follow us for updates and events:</p>
        <div style="margin-bottom: 15px;">
          <a href="https://www.facebook.com/UrbanSwingNZ" style="display: inline-block; margin: 0 8px;" target="_blank" rel="noopener">
            <img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook" style="width: 32px; height: 32px; vertical-align: middle;">
          </a>
          <a href="https://www.instagram.com/urbanswingnz" style="display: inline-block; margin: 0 8px;" target="_blank" rel="noopener">
            <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram" style="width: 32px; height: 32px; vertical-align: middle;">
          </a>
          <a href="https://urbanswing.co.nz" style="display: inline-block; margin: 0 8px;" target="_blank" rel="noopener">
            <img src="https://cdn-icons-png.flaticon.com/512/1006/1006771.png" alt="Website" style="width: 32px; height: 32px; vertical-align: middle;">
          </a>
          <a href="mailto:dance@urbanswing.co.nz" style="display: inline-block; margin: 0 8px;">
            <img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" alt="Email" style="width: 32px; height: 32px; vertical-align: middle;">
          </a>
        </div>
      </div>
    </div>
  `;

  const text = `
Join the Urban Swing Portal!

Hi ${student.firstName},

We're excited to invite you to join the Urban Swing Student Portal! The portal is your one-stop shop for managing everything related to your dancing at Urban Swing.

What You Can Do in the Portal:
- Buy Concessions: Purchase class packages online at your convenience
- Prepay for Classes: Reserve your spot in upcoming classes
- Manage Your Info: Keep your contact details and preferences up to date
- View History: Track your class check-ins and transactions

Get started now: ${registrationLink}

How to Get Started:
1. Click the link above
2. On the registration page, click on "I'm an existing student"
3. Enter your email address: ${student.email}
4. Create a password for your account
5. Start managing your Urban Swing experience!

If you have any questions or need help setting up your account, don't hesitate to reach out to us at dance@urbanswing.co.nz.

See you on the dance floor! ðŸ’ƒðŸ•º

The Urban Swing Team

---
Follow us:
Facebook: https://www.facebook.com/UrbanSwingNZ
Instagram: https://www.instagram.com/urbanswingnz
Website: https://urbanswing.co.nz
Email: dance@urbanswing.co.nz
  `;

  return { html, text };
}

module.exports = {
  generatePortalInvitationEmail
};
