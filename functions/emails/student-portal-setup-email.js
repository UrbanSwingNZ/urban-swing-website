/**
 * student-portal-setup-email.js
 * Email template for existing students setting up portal accounts
 */

/**
 * Generate account setup confirmation email
 * @param {Object} student - Student data
 * @param {Object} user - User data
 * @param {string} setupDate - Formatted setup date
 * @returns {Object} Object with html and text versions
 */
function generateAccountSetupEmail(student, user, setupDate) {
  // Email color mappings from styles/base/colors.css
  const colors = {
    purplePrimary: '#9a16f5',    // --purple-primary
    pinkPrimary: '#ed217c',      // Custom gradient color (similar to --pink-primary)
    white: '#ffffff',            // --white
    textPrimary: '#333',         // --text-primary
    textLight: '#666',           // --text-light
    bgLight: '#f8f9fa',          // --bg-light / --gray-200
    bgInfoLight: '#e8f4fd',      // --info-light
    infoBlue: '#0c5aa6',         // Dark blue for info sections
    borderLight: '#e0e0e0',      // --border-light / --gray-450
  };

  const html = `
    <!-- Generated by JS: student-portal-setup-email.js > generateAccountSetupEmail -->
    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
      <div style="background: linear-gradient(135deg, ${colors.purplePrimary} 0%, ${colors.pinkPrimary} 100%); padding: 40px 20px; text-align: center;">
        <h1 style="color: ${colors.white}; margin: 0; font-size: 2rem;">Welcome Back!</h1>
      </div>
      
      <div style="padding: 40px 30px; background: ${colors.white};">
        <h2 style="color: ${colors.textPrimary}; margin-top: 0;">Your Urban Swing Portal Account is Ready!</h2>
        
        <p style="font-size: 1.1rem; line-height: 1.6; color: ${colors.textPrimary};">
          Hi ${student.firstName},
        </p>
        
        <p style="font-size: 1rem; line-height: 1.6; color: ${colors.textPrimary};">
          Great news! You've successfully set up your Urban Swing Student Portal account. 
          You can now access your account to view your class history, manage your concessions, 
          and stay up to date with everything Urban Swing.
        </p>
        
        <div style="background: ${colors.bgLight}; padding: 20px; border-radius: 8px; margin: 30px 0; border-left: 4px solid ${colors.purplePrimary};">
          <h3 style="color: ${colors.purplePrimary}; margin-top: 0;">Account Details</h3>
          <p style="margin: 5px 0; color: ${colors.textPrimary};"><strong>Name:</strong> ${student.firstName} ${student.lastName}</p>
          <p style="margin: 5px 0; color: ${colors.textPrimary};"><strong>Email:</strong> ${user.email}</p>
          <p style="margin: 5px 0; color: ${colors.textPrimary};"><strong>Setup Date:</strong> ${setupDate}</p>
        </div>
        
        <div style="text-align: center; margin: 40px 0;">
          <a href="https://urbanswing.co.nz/student-portal/" 
             style="display: inline-block; padding: 16px 32px; background: ${colors.purplePrimary}; 
                    color: ${colors.white}; text-decoration: none; border-radius: 8px; font-weight: bold; font-size: 1.1rem;">
            Access Your Portal
          </a>
        </div>
        
        <div style="background: ${colors.bgInfoLight}; padding: 20px; border-radius: 8px; margin: 30px 0;">
          <h3 style="color: ${colors.infoBlue}; margin-top: 0;">What You Can Do in the Portal:</h3>
          <ul style="line-height: 1.8; color: ${colors.textPrimary};">
            <li>View your class check-in history</li>
            <li>Manage your concession packages</li>
            <li>Update your profile information</li>
            <li>View transaction history</li>
            <li>Purchase new concessions</li>
          </ul>
        </div>
        
        <p style="font-size: 1rem; line-height: 1.6; color: ${colors.textPrimary}; margin-top: 30px;">
          If you have any questions or need help with your account, don't hesitate to reach out to us at 
          <a href="mailto:dance@urbanswing.co.nz" style="color: ${colors.purplePrimary};">dance@urbanswing.co.nz</a>.
        </p>
        
        <p style="font-size: 1rem; line-height: 1.6; color: ${colors.textPrimary}; margin-top: 20px;">
          See you on the dance floor! ðŸ’ƒðŸ•º
        </p>
        
        <p style="font-size: 1rem; line-height: 1.6; color: ${colors.textPrimary};">
          The Urban Swing Team
        </p>
      </div>
      
      <div style="padding: 20px; text-align: center; background: ${colors.bgLight}; border-top: 1px solid ${colors.borderLight};">
        <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: ${colors.textLight};">Follow us for updates and events:</p>
        <div style="margin-bottom: 15px;">
          <a href="https://www.facebook.com/UrbanSwingNZ" style="display: inline-block; margin: 0 8px;" target="_blank" rel="noopener">
            <img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook" style="width: 32px; height: 32px; vertical-align: middle;">
          </a>
          <a href="https://www.instagram.com/urbanswingnz" style="display: inline-block; margin: 0 8px;" target="_blank" rel="noopener">
            <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram" style="width: 32px; height: 32px; vertical-align: middle;">
          </a>
          <a href="https://urbanswing.co.nz" style="display: inline-block; margin: 0 8px;" target="_blank" rel="noopener">
            <img src="https://cdn-icons-png.flaticon.com/512/1006/1006771.png" alt="Website" style="width: 32px; height: 32px; vertical-align: middle;">
          </a>
          <a href="mailto:dance@urbanswing.co.nz" style="display: inline-block; margin: 0 8px;">
            <img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" alt="Email" style="width: 32px; height: 32px; vertical-align: middle;">
          </a>
        </div>
      </div>
    </div>
  `;

  const text = `
Welcome Back to Urban Swing!

Hi ${student.firstName},

Great news! You've successfully set up your Urban Swing Student Portal account.

Account Details:
- Name: ${student.firstName} ${student.lastName}
- Email: ${user.email}
- Setup Date: ${setupDate}

You can now access your portal at: https://urbanswing.co.nz/student-portal/

What You Can Do in the Portal:
- View your class check-in history
- Manage your concession packages
- Update your profile information
- View transaction history
- Purchase new concessions

If you have any questions or need help with your account, don't hesitate to reach out to us at dance@urbanswing.co.nz.

See you on the dance floor! ðŸ’ƒðŸ•º

The Urban Swing Team

---
Follow us:
Facebook: https://www.facebook.com/UrbanSwingNZ
Instagram: https://www.instagram.com/urbanswingnz
Website: https://urbanswing.co.nz
Email: dance@urbanswing.co.nz
  `;

  return { html, text };
}

module.exports = {
  generateAccountSetupEmail
};
